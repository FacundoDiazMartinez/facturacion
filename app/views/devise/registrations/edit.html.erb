<%= title('user', 'Mi perfil') %>

<ul class="nav nav-pills nav-fill">
  <li class="nav-item" id="personal_i">
    <%= link_to "Información básica", "#", onclick: "changeInformation('personal')", class: 'nav-link active' %>
  </li>
  <li class="nav-item" id="account_i">
    <%= link_to "Cuenta", "#", onclick: "changeInformation('user')", class: 'nav-link' %>
  </li>
</ul>

<hr>

<div class="card shadow">
  <div class="card-body">
    <div id="basic_info" style="display: block;">

      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
        <%= devise_error_messages! %>
        <div class="row">

          <div class="col-6">
            <div class="form-group">
              <%= f.label :first_name, "Nombre", class:'control-label' %>
              <%= f.text_field :first_name, class:'form-control', placeholder: "Nombre", required: true %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group">
              <%= f.label :last_name, "Apellido", class:'control-label' %>
              <%= f.text_field :last_name, class:'form-control', placeholder: "Apellido", required: true %>
            </div>
          </div>


          <div class="col-6">
            <div class="form-group">
              <%= f.label :dni, "D.N.I.", class:'control-label' %>
              <%= f.number_field :dni, class:'form-control', placeholder: "D.N.I.", required: true %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group">
              <%= f.label :birthday, "Fecha nacimiento", class:'control-label' %>
              <%= f.text_field :birthday, class:'form-control datepicker', placeholder: "Fecha de nacimiento", required: true %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group">
              <%= f.label :phone, "Teléfono fijo", class:'control-label' %>
              <%= f.number_field :phone, class:'form-control', placeholder: "Teléfono fijo" %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group">
              <%= f.label :mobile_phone, "Celular", class:'control-label' %>
              <%= f.number_field :mobile_phone, class:'form-control', placeholder: "Celular" %>
            </div>
          </div>


          <div class="col-6">
            <div class="form-group">
              <%= f.label :province_id, "Provincia", class:'control-label' %>
              <%= f.select :province_id, options_from_collection_for_select(Province.all, :id, :name, f.object.province_id), {prompt: "Seleccione..."}, {:class => 'form-control', onchange: 'reloadLocality($(this).val(), "user_locality_id")', required: true} %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group with-spinner">
              <%= f.label :locality_id, "Localidad", class:'control-label' %>
              <%= f.select :locality_id, options_from_collection_for_select(Locality.where(province_id: f.object.province_id).order(:name), :id, :name, f.object.locality_id), {prompt: "Seleccione..."}, {:class => 'form-control', required: true} %>
            </div>
          </div>


          <div class="col-6">
            <div class="form-group">
              <%= f.label :postal_code, "Código postal", class:'control-label' %>
              <%= f.number_field :postal_code, class:'form-control', placeholder: "Código postal" %>
            </div>
          </div>

          <div class="col-6">
            <div class="form-group">
              <%= f.label :address, "Dirección", class:'control-label' %>
              <%= f.text_field :address, class:'form-control', placeholder: "Dirección" %>
            </div>
          </div>

        </div>

        <hr>

        <center>
          <%= save_button %>
          <%= back_button %>
        </center>
      <% end %>

    </div>

    <div id="account" style="display: none;">
      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
        <div class="row">
          <div class="col-md-6 offset-md-3">
            <%- if devise_mapping.confirmable? && resource.pending_reconfirmation? -%>
              <p>
                <%= t('.currently_waiting_confirmation_for_email', :email => resource.unconfirmed_email, :default => "Esperando confirmación de: %{email}") %>
              </p>
            <%- end -%>

            <div class="form-group">
              <%= f.label :password %> <i>(<%= t('.leave_blank_if_you_don_t_want_to_change_it', :default => "leave blank if you don't want to change it") %>)</i>
              <%= f.password_field :password, :autocomplete => "off", class:'form-control' %>
            </div>


            <div class="form-group">
              <%= f.label :password_confirmation %>
              <%= f.password_field :password_confirmation, class:'form-control' %>
            </div>

            <center>
              <%= link_to "Eliminar mi cuenta", registration_path(resource_name), :data => { :confirm => t('.are_you_sure', :default => "Are you sure?") }, :method => :delete, class: 'btn btn-secondary' %>
            </center>

          </div>
        </div>

        <hr>

        <center>
          <%= save_button %>
          <%= back_button %>
        </center>
      <% end %>
    </div>
  </div>
</div>
