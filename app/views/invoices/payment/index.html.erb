<h3 class="d-flex mb-2">
    <div class="p-2">
      	Pagos
    </div>
    <div class="ml-auto p-2">
      	<% if @invoice.editable? %>
        	<%= form.link_to_add "#{icon('fas', 'plus')} <span class='only-desktop'>Agregar pago</span>".html_safe, :payments, class: 'btn btn-success', data: {target: '#payments'}%>
      	<% end %>
    </div>
</h3>
<div class="table-responsive-sm">
	<table class="table table-striped invoice-table" id="payments" style="width: 100%;">
		<thead>
			<tr>
				<th scope="col">Tipo de pago</th>
				<th scope="col">Monto</th>
				<th scope="col">Fecha de pago</th>
				<th scope="col"></th>
			</tr>
		</thead>
		<tbody>
			<%= form.fields_for :payments, wrapper: false do |f| %>
		      	<tr class="fields">
		      		<td><%= f.select :type_of_payment, Payment::TYPES.map{|k,v| [v,k]}, {}, {class: 'form-control form-control-sm', style: 'min-width: 100px;', disabled: !@invoice.editable?} %></td>
		      		<td class="popup">
						<%= f.number_field :total, class: 'form-control form-control-sm amount', default: 0.0, disabled: !@invoice.editable? %>
				    	<span class="popuptext" id="myPopup">Esta intentando cobrar un monto superior.</span>
					</td>
		      		<td><%= f.text_field :payment_date, class: 'form-control form-control-sm datepicker', disabled: !@invoice.editable? %></td>
		      		<td>
		      			<% if @invoice.editable? %>
		      				<%= f.link_to_remove icon('fas', 'trash') %>
		      			<% end %>
		      		</td>
		     	</tr>
		    <% end %>
		</tbody>
	</table>
</div>