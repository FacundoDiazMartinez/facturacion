<h3 class="d-flex mb-2">
    <div class="p-2">
      	Conceptos
    </div>
    <div class="ml-auto p-2">
      	<% if @purchase_order.editable? %>
        	<%= form.link_to_add "#{icon('fas', 'plus')} Agregar producto".html_safe, :purchase_order_details, class: 'btn btn-sm btn-success float-md-right', data: {target: '#details'} %>
      	<% end %>
    </div>
</h3>
<div class="table-responsive">
	<table class="table" id="details">
		<thead>
			<tr>
				<th></th>
				<th scope="col">Código interno</th>
				<th scope="col">Código de proveedor</th>
				<th scope="col">Producto</th>
				<th scope="col">Precio unitario</th>
				<th scope="col">Cantidad</th>
				<th scope="col">Subtotal</th>
				<th scope="col"></th>
			</tr>
		</thead>
		<tbody>
			<%= form.fields_for :purchase_order_details, wrapper: false do |f| %>
				<tr class="fields" id="<%= f.index %>">
					<%= f.fields_for :product, (f.object.build_product unless !f.object.product.nil?) do |pf| %>
						<td>
              <% if @purchase_order.editable? %>
                <%= link_to icon('fas', 'search'), search_product_purchase_orders_path(index_id: f.index), data:{toggle: 'modal', target:'#search_product_modal', remote: true}, class: 'btn btn-sm btn-secondary' %>
              <% else %>
                #
              <% end %>
		  					<%= pf.hidden_field :id, class: 'product_id' %>
				  		</td>
						<td><%= pf.autocomplete_field :code, autocomplete_product_code_purchase_orders_path, class: 'purchase_order-autocomplete_field form-control code', data:{noMatchesLabel: "Crear nuevo producto."}, required: true, disabled: !@purchase_order.editable?  %></td>
						<td><%= pf.text_field :supplier_code, class: 'purchase_order-autocomplete_field form-control supplier_code', disabled: !@purchase_order.editable?  %></td>
						<td><%= pf.text_field :name, class: 'form-control name', disabled: !@purchase_order.editable?  %></td>
						<td><%= pf.number_field :cost_price, class: 'form-control prodPrice',step: :any, disabled: !@purchase_order.editable?  %></td>
					<% end %>
					<td><%= f.number_field :quantity, class: 'form-control prodQuant', min: 1, disabled: !@purchase_order.editable?  %></td>
					<td><%= f.number_field :total, class: 'form-control prodSubtotal', readonly: true %></td>
          <% if @purchase_order.editable? %>
            <td class="verical-align"><%= f.link_to_remove icon('fas', 'times') %></td>
          <% end %>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>
