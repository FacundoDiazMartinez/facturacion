<%= form_with(model: purchase_invoice, local: true) do |form| %>
  <% if purchase_invoice.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(purchase_invoice.errors.count, "error") %> prohibited this purchase_invoice from being saved:</h2>

      <ul>
      <% purchase_invoice.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">

    <div class="col">

      <div class="form-group">
        <%= form.label :supplier_id %>
        <%= form.select :supplier_id, current_user.company.suppliers.map{|s| [s.name, s.id]}, {include_blank: "Sin proveedor"}, {class: 'form-control'} %>
      </div>

      <div class="form-group">
        <%= form.label :arrival_note_id %>
        <%= autocomplete_field_tag :arrival_note_id, '', autocomplete_arrival_note_id_purchase_invoices_path, class: 'form-control', id_element: "#purchase_invoice_arrival_note_id", placeholder: "Número de remito" %>
        <%= form.hidden_field :arrival_note_id %>
      </div>

      <div class="form-group">
        <%= label_tag :document_number, "Comprobante" %>
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <%= form.select :cbte_tipo, Afip::CBTE_TIPO.map{|tipo| [tipo.last, tipo.first]}, {prompt: "Seleccione..."}, {class: 'form-control input-group-text'} %>
          </div>
          <%= form.text_field :number, class: 'form-control', placeholder: "Número de comprobante" %>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :date %>
        <%= form.text_field :date, class: 'form-control datepicker' %>
      </div>
      
    </div>

    <div class="col">
      <div class="form-group">
        <%= form.label :net_amount %>
        <%= form.number_field :net_amount, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= form.label :iva_amount %>
        <%= form.number_field :iva_amount, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= form.label :imp_op_ex %>
        <%= form.number_field :imp_op_ex, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= form.label :total %>
        <%= form.number_field :total, class: 'form-control' %>
      </div>
    </div>

  </div>
  <hr>
  <center>
    <%= save_button %>
  </center>
<% end %>
