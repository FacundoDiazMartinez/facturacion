<div class="m-4">
  <h4 class="text-center"><%= icon('fas', 'money-bill-alt') %> Ingrese los datos del pago</h4>
  <%= form_for [@client, @account_movement] do |f| %>
    <%= error_explanation @account_movement %>
    <div class="form-group">
      <%= f.label :total, "Total" %>
      <%= f.number_field :total, class: 'form-control' %>
    </div>

    <%= f.hidden_field :haber, value: true %>
    <%= f.hidden_field :debe, value: false %>
    <%= f.hidden_field :cbte_tipo, value: "Recibo X" %>

    <%= f.fields_for :receipt do |rf| %>
      <div class="fields">
        <div class="form-group">
          <%= rf.label :sale_point_id, "Punto de venta" %>
          <%= rf.select :sale_point_id, current_user.company.sale_points.map{|sp| [sp.name, sp.id]}, {}, {class: 'form-control form-control-sm', style: 'min-width: 100px;'} %>
        </div>

        <%= rf.hidden_field :client_id, value: @client.id %>

      </div>
    <% end -%>

    <%= f.fields_for :account_movement_payments do |pf| %>
      <div class="fields">
        <div class="form-group">
          <%= pf.label :type_of_payment, "Tipo" %>
          <%= pf.select :type_of_payment, Payment::TYPES.map{|k,v| [v,k]}, {}, {class: 'form-control', style: 'min-width: 100px;'} %>
        </div>
        <div class="form-group">
          <%= pf.label :payment_date, "Fecha" %>
          <%= pf.text_field :payment_date, class: 'form-control datepicker' %>
        </div>
      </div>
    <% end -%>
    <center><%= save_button %></center>
  <% end -%>
</div>